import os, sys

library_dependencies = ['boost_system'
                      , 'boost_filesystem'
                      , 'boost_timer'
                      , 'boost_program_options'
                      , 'pthread']

env = Environment(CPPDEFINES=[], LIBS=[], ENV = os.environ)

env.Append(CPPPATH = ['./src/external/', os.environ.get('BOOST_LIB_PATH','')])
env.Append(LIBPATH = [os.environ.get('BOOST_LIB_PATH','')])

if os.environ.has_key('CXX'):
  custom_CXX = os.environ['CXX']
  print 'Replacing default CXX with ' + custom_CXX
  env.Replace(CXX = custom_CXX) 


link_flags = "--static" if env['PLATFORM'] != 'darwin' else ""

env.Program('barn-agent', [Glob('./src/*.cpp')]
                        , LIBS = library_dependencies
                        , CCFLAGS = ['-std=c++11', '-pedantic', '-O2']
                        , LINKFLAGS = link_flags)
